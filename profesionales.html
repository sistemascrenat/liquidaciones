<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Cl√≠nica Rennat ‚Äì Profesionales</title>
  <link rel="icon" type="image/png" href="logoCR.png">
  <link rel="stylesheet" href="estilos.css"/>
</head>

<body>
  <!-- APP SHELL -->
  <div class="app-shell">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">CR</div>
        <div>
          <div class="title">Cl√≠nica Rennat</div>
          <div class="sub">Panel privado</div>
        </div>
      </div>

      <nav class="nav">
        <a class="nav-item active" href="profesionales.html">üë©‚Äç‚öïÔ∏è Profesionales</a>
        <a class="nav-item" href="procedimientos.html">üßæ Procedimientos</a>
        <a class="nav-item" href="clinicas.html">üè• Cl√≠nicas</a>
        <a class="nav-item" href="dashboard.html">üè† Volver al Dashboard</a>
      </nav>

      <div class="sidebar-footer">
        <div class="pill" id="pillUser">‚Äî</div>
        <button class="btn" id="btnLogout">‚èèÔ∏è Cerrar sesi√≥n</button>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">

      <!-- HEADER -->
      <header class="topbar">
        <div>
          <h1 style="margin:0;">Profesionales</h1>
          <div class="muted" id="subHeader">Gesti√≥n de profesionales (incluye descuentos UF y cl√≠nicas)</div>
        </div>

        <div class="top-actions">
          <button class="btn btn-soft" id="btnNuevoProfesional">+ Nuevo profesional</button>

          <div class="search-wrap">
            <input id="profSearch" placeholder="Buscar (nombre, rut, raz√≥n social, correo, estado‚Ä¶)" />
            <button class="btn btn-soft" id="profSearchClear" style="display:none;">‚úï</button>
          </div>
        </div>
      </header>

      <!-- HINT -->
      <div class="muted" id="profSearchHint" style="margin:8px 0 14px 0;"></div>

      <!-- TABLE -->
      <section class="card">
        <div id="tablaProfesionales"></div>
      </section>

    </main>
  </div>

  <!-- OVERLAY + MODAL PROFESIONAL -->
  <div id="modalOverlay" class="modal-overlay" style="display:none;">
    <div id="modalProfesional" class="modal" style="display:none;">

      <div class="modal-head">
        <div>
          <div class="modal-title" id="modalProfTitle">Nuevo profesional</div>
          <div class="muted" id="modalProfSubtitle">Crear un nuevo profesional</div>
        </div>
        <button class="btn btn-soft" id="btnCerrarModalProf">‚úï</button>
      </div>

      <div class="modal-body">
        <div id="mProfError" class="error" style="display:none;"></div>

        <div class="grid-2">
          <div>
            <label>RUT (ID)</label>
            <input id="mProfRut" placeholder="12.345.678-9">
          </div>

          <div>
            <label>Nombre profesional (obligatorio)</label>
            <input id="mProfNombre" placeholder="Ej: Juan P√©rez">
          </div>
        </div>

        <div class="grid-2">
          <div>
            <label>Tipo persona</label>
            <select id="mProfTipoPersona">
              <option value="natural">Natural</option>
              <option value="juridica">Jur√≠dica</option>
            </select>
          </div>

          <div>
            <label>Estado</label>
            <select id="mProfEstado">
              <option value="activo">Activo</option>
              <option value="inactivo">Inactivo</option>
            </select>
          </div>
        </div>

        <div class="grid-2">
          <div>
            <label>Correo personal</label>
            <input id="mProfCorreoPersonal" placeholder="correo@dominio.cl">
          </div>
          <div>
            <label>Tel√©fono</label>
            <input id="mProfTelefono" placeholder="+56 9 1234 5678">
          </div>
        </div>

        <div>
          <label>Direcci√≥n / Comentarios</label>
          <input id="mProfDireccion" placeholder="Direcci√≥n o comentario interno">
        </div>

        <!-- CAMPOS EMPRESA (solo jur√≠dica) -->
        <div id="empresaFields" style="display:none; margin-top:10px;">
          <div class="divider"></div>
          <div class="muted" style="margin-bottom:8px;">Datos de empresa (solo si es Jur√≠dica)</div>

          <div class="grid-2">
            <div>
              <label>RUT empresa</label>
              <input id="mProfRutEmpresa" placeholder="76.123.456-7">
            </div>
            <div>
              <label>Raz√≥n social</label>
              <input id="mProfRazon" placeholder="Empresa SpA">
            </div>
          </div>

          <div class="grid-2">
            <div>
              <label>Giro</label>
              <input id="mProfGiro" placeholder="Giro">
            </div>
            <div>
              <label>Correo empresa</label>
              <input id="mProfCorreoEmpresa" placeholder="contacto@empresa.cl">
            </div>
          </div>

          <div class="grid-2">
            <div>
              <label>Direcci√≥n empresa</label>
              <input id="mProfDireccionEmpresa" placeholder="Direcci√≥n empresa">
            </div>
            <div>
              <label>Ciudad empresa</label>
              <input id="mProfCiudadEmpresa" placeholder="Santiago">
            </div>
          </div>
        </div>

        <!-- CLINICAS -->
        <div style="margin-top:12px;">
          <div class="divider"></div>
          <div class="muted" style="margin-bottom:8px;">Cl√≠nicas asignadas</div>
          <div id="mProfClinicas" class="checklist"></div>
          <div class="muted" style="margin-top:6px;">En ‚ÄúNuevo profesional‚Äù se asignan por defecto todas las cl√≠nicas activas.</div>
        </div>

        <!-- DESCUENTOS -->
        <div style="margin-top:12px;">
          <div class="divider"></div>
          <div class="grid-2" style="align-items:center;">
            <div>
              <label style="display:flex;gap:10px;align-items:center;margin:0;">
                <input type="checkbox" id="mProfTieneDesc">
                <span>Aplica descuento (UF)</span>
              </label>
              <div class="muted" style="margin-top:6px;">Ej: ‚Äú0,50 UF‚Äù de descuento mensual / fijo.</div>
            </div>
            <div>
              <label>Monto descuento UF</label>
              <input id="mProfDescMonto" placeholder="0,50">
            </div>
          </div>

          <div style="margin-top:8px;">
            <label>Raz√≥n del descuento</label>
            <input id="mProfDescRazon" placeholder="Ej: ajuste convenio, descuento especial, etc.">
          </div>
        </div>

        <div class="divider" style="margin-top:14px;"></div>
        <div class="muted">
          Nota: Roles no se editan aqu√≠. Quedan para el m√≥dulo ‚ÄúRoles‚Äù.
        </div>

      </div>

      <div class="modal-foot">
        <button class="btn btn-soft" id="btnCancelarModalProf">Cancelar</button>
        <button class="btn" id="btnGuardarModalProf">Guardar</button>
      </div>

    </div>
  </div>

  <script type="module" src="profesionales.js"></script>
</body>
</html>
